<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Diagrams.TwoD.Transform.ScaleInv</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Diagrams-TwoD-Transform-ScaleInv.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Diagrams-TwoD-Transform-ScaleInv.html">Source</a></li><li><a href="http://www.haskell.org/haskellwiki/Diagrams/Comments/Diagrams.TwoD.Transform.ScaleInv">User Comments</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">diagrams-lib-1.0: Embedded domain-specific language for declarative graphics</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Maintainer</th><td>diagrams-discuss@googlegroups.com</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Diagrams.TwoD.Transform.ScaleInv</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Wrapper for creating scale-invariant objects in two dimensions.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span>  <a href="#t:ScaleInv">ScaleInv</a> t = <a href="#v:ScaleInv">ScaleInv</a> {<ul class="subs"><li><a href="#v:_scaleInvObj">_scaleInvObj</a> :: t</li><li><a href="#v:_scaleInvDir">_scaleInvDir</a> :: <a href="Diagrams-TwoD-Types.html#t:R2">R2</a></li><li><a href="#v:_scaleInvLoc">_scaleInvLoc</a> :: <a href="Diagrams-TwoD-Types.html#t:P2">P2</a></li></ul>}</li><li class="src short"><a href="#v:scaleInvObj">scaleInvObj</a> :: <span class="keyword">forall</span> t t.  <a href="http://hackage.haskell.org/packages/archive/lens/3.10/doc/html/Control-Lens-Type.html#t:Lens">Lens</a> (<a href="Diagrams-TwoD-Transform-ScaleInv.html#t:ScaleInv">ScaleInv</a> t) (<a href="Diagrams-TwoD-Transform-ScaleInv.html#t:ScaleInv">ScaleInv</a> t) t t</li><li class="src short"><a href="#v:scaleInvDir">scaleInvDir</a> :: <span class="keyword">forall</span> t.  <a href="http://hackage.haskell.org/packages/archive/lens/3.10/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-TwoD-Transform-ScaleInv.html#t:ScaleInv">ScaleInv</a> t) <a href="Diagrams-TwoD-Types.html#t:R2">R2</a></li><li class="src short"><a href="#v:scaleInvLoc">scaleInvLoc</a> :: <span class="keyword">forall</span> t.  <a href="http://hackage.haskell.org/packages/archive/lens/3.10/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-TwoD-Transform-ScaleInv.html#t:ScaleInv">ScaleInv</a> t) <a href="Diagrams-TwoD-Types.html#t:P2">P2</a></li><li class="src short"><a href="#v:scaleInv">scaleInv</a> ::  t -&gt; <a href="Diagrams-TwoD-Types.html#t:R2">R2</a> -&gt; <a href="Diagrams-TwoD-Transform-ScaleInv.html#t:ScaleInv">ScaleInv</a> t</li><li class="src short"><a href="#v:scaleInvPrim">scaleInvPrim</a> :: (<a href="Diagrams-Transform.html#t:Transformable">Transformable</a> t, <a href="Diagrams-Core-Types.html#t:Renderable">Renderable</a> t b, <a href="Diagrams-Core-V.html#t:V">V</a> t ~ <a href="Diagrams-TwoD-Types.html#t:R2">R2</a>, <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Monoid.html#t:Monoid">Monoid</a> m) =&gt; t -&gt; <a href="Diagrams-TwoD-Types.html#t:R2">R2</a> -&gt; <a href="Diagrams-Core-Types.html#t:QDiagram">QDiagram</a> b <a href="Diagrams-TwoD-Types.html#t:R2">R2</a> m</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:ScaleInv" class="def">ScaleInv</a> t <a href="src/Diagrams-TwoD-Transform-ScaleInv.html#ScaleInv" class="link">Source</a></p><div class="doc"><p>The <code>ScaleInv</code> wrapper creates two-dimensional <em>scale-invariant</em>
   objects.  Intuitively, a scale-invariant object is affected by
   transformations like translations and rotations, but not by scales.
</p><p>However, this is problematic when it comes to <em>non-uniform</em>
   scales (<em>e.g.</em> <code>scaleX 2 . scaleY 3</code>) since they can introduce a
   perceived rotational component.  The prototypical example is an
   arrowhead on the end of a path, which should be scale-invariant.
   However, applying a non-uniform scale to the path but not the
   arrowhead would leave the arrowhead pointing in the wrong
   direction.
</p><p>Moreover, for objects whose local origin is not at the local
   origin of the parent diagram, any scale can result in a
   translational component as well.
</p><p>The solution is to also store a point (indicating the location,
   <em>i.e.</em> the local origin) and a unit vector (indicating the
   <em>direction</em>) along with a scale-invariant object.  A
   transformation to be applied is decomposed into rotational and
   translational components as follows:
</p><ul><li> The transformation is applied to the direction vector, and the
   difference in angle between the original direction vector and its
   image under the transformation determines the rotational
   component.  The rotation is applied with respect to the stored
   location, rather than the global origin.
</li><li> The vector from the location to the image of the location under
   the transformation determines the translational component.
</li></ul></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ScaleInv" class="def">ScaleInv</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:_scaleInvObj" class="def">_scaleInvObj</a> :: t</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:_scaleInvDir" class="def">_scaleInvDir</a> :: <a href="Diagrams-TwoD-Types.html#t:R2">R2</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:_scaleInvLoc" class="def">_scaleInvLoc</a> :: <a href="Diagrams-TwoD-Types.html#t:P2">P2</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:ScaleInv" class="caption collapser" onclick="toggleSection('i:ScaleInv')">Instances</p><div id="section.i:ScaleInv" class="show"><table><tr><td class="src"><a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Text-Show.html#t:Show">Show</a> t =&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Text-Show.html#t:Show">Show</a> (<a href="Diagrams-TwoD-Transform-ScaleInv.html#t:ScaleInv">ScaleInv</a> t)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(~ * (<a href="Diagrams-Core-V.html#t:V">V</a> t) <a href="Diagrams-TwoD-Types.html#t:R2">R2</a>, <a href="Diagrams-Transform.html#t:Transformable">Transformable</a> t) =&gt; <a href="Diagrams-Core-Types.html#t:IsPrim">IsPrim</a> (<a href="Diagrams-TwoD-Transform-ScaleInv.html#t:ScaleInv">ScaleInv</a> t)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(~ * (<a href="Diagrams-Core-V.html#t:V">V</a> t) <a href="Diagrams-TwoD-Types.html#t:R2">R2</a>, <a href="Diagrams-Transform.html#t:Transformable">Transformable</a> t) =&gt; <a href="Diagrams-Transform.html#t:Transformable">Transformable</a> (<a href="Diagrams-TwoD-Transform-ScaleInv.html#t:ScaleInv">ScaleInv</a> t)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(~ * (<a href="Diagrams-Core-V.html#t:V">V</a> t) <a href="Diagrams-TwoD-Types.html#t:R2">R2</a>, <a href="Diagrams-Transform.html#t:HasOrigin">HasOrigin</a> t) =&gt; <a href="Diagrams-Transform.html#t:HasOrigin">HasOrigin</a> (<a href="Diagrams-TwoD-Transform-ScaleInv.html#t:ScaleInv">ScaleInv</a> t)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="Diagrams-Core-Types.html#t:Renderable">Renderable</a> t b, ~ * (<a href="Diagrams-Core-V.html#t:V">V</a> t) <a href="Diagrams-TwoD-Types.html#t:R2">R2</a>) =&gt; <a href="Diagrams-Core-Types.html#t:Renderable">Renderable</a> (<a href="Diagrams-TwoD-Transform-ScaleInv.html#t:ScaleInv">ScaleInv</a> t) b</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:scaleInvObj" class="def">scaleInvObj</a> :: <span class="keyword">forall</span> t t.  <a href="http://hackage.haskell.org/packages/archive/lens/3.10/doc/html/Control-Lens-Type.html#t:Lens">Lens</a> (<a href="Diagrams-TwoD-Transform-ScaleInv.html#t:ScaleInv">ScaleInv</a> t) (<a href="Diagrams-TwoD-Transform-ScaleInv.html#t:ScaleInv">ScaleInv</a> t) t t<a href="src/Diagrams-TwoD-Transform-ScaleInv.html#scaleInvObj" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:scaleInvDir" class="def">scaleInvDir</a> :: <span class="keyword">forall</span> t.  <a href="http://hackage.haskell.org/packages/archive/lens/3.10/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-TwoD-Transform-ScaleInv.html#t:ScaleInv">ScaleInv</a> t) <a href="Diagrams-TwoD-Types.html#t:R2">R2</a><a href="src/Diagrams-TwoD-Transform-ScaleInv.html#scaleInvDir" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:scaleInvLoc" class="def">scaleInvLoc</a> :: <span class="keyword">forall</span> t.  <a href="http://hackage.haskell.org/packages/archive/lens/3.10/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-TwoD-Transform-ScaleInv.html#t:ScaleInv">ScaleInv</a> t) <a href="Diagrams-TwoD-Types.html#t:P2">P2</a><a href="src/Diagrams-TwoD-Transform-ScaleInv.html#scaleInvLoc" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:scaleInv" class="def">scaleInv</a> ::  t -&gt; <a href="Diagrams-TwoD-Types.html#t:R2">R2</a> -&gt; <a href="Diagrams-TwoD-Transform-ScaleInv.html#t:ScaleInv">ScaleInv</a> t<a href="src/Diagrams-TwoD-Transform-ScaleInv.html#scaleInv" class="link">Source</a></p><div class="doc"><p>Create a scale-invariant object pointing in the given direction,
   located at the origin.
</p></div></div><div class="top"><p class="src"><a name="v:scaleInvPrim" class="def">scaleInvPrim</a> :: (<a href="Diagrams-Transform.html#t:Transformable">Transformable</a> t, <a href="Diagrams-Core-Types.html#t:Renderable">Renderable</a> t b, <a href="Diagrams-Core-V.html#t:V">V</a> t ~ <a href="Diagrams-TwoD-Types.html#t:R2">R2</a>, <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Monoid.html#t:Monoid">Monoid</a> m) =&gt; t -&gt; <a href="Diagrams-TwoD-Types.html#t:R2">R2</a> -&gt; <a href="Diagrams-Core-Types.html#t:QDiagram">QDiagram</a> b <a href="Diagrams-TwoD-Types.html#t:R2">R2</a> m<a href="src/Diagrams-TwoD-Transform-ScaleInv.html#scaleInvPrim" class="link">Source</a></p><div class="doc"><p>Create a diagram from a single scale-invariant primitive.  The
   vector argument specifies the direction in which the primitive is
   &quot;pointing&quot; (for the purpose of keeping it rotated correctly
   under non-uniform scaling).  The primitive is assumed to be
   &quot;located&quot; at the origin (for the purpose of translating it
   correctly under scaling).
</p><p>Note that the resulting diagram will have an <em>empty</em> envelope,
   trace, and query.  The reason is that the envelope, trace, and
   query cannot be cached---applying a transformation would cause
   the cached envelope, etc. to get &quot;out of sync&quot; with the
   scale-invariant object.  The intention, at any rate, is that
   scale-invariant things will be used only as &quot;decorations&quot; (<em>e.g.</em>
   arrowheads) which should not affect the envelope, trace, and
   query.
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2.1</p></div></body></html>